
#!/bin/bash
set -e

case "$1" in
    purge)
        # Remove user and group
        if getent passwd regional-check-agent >/dev/null 2>&1; then
            deluser regional-check-agent || true
        fi
        
        if getent group regional-check-agent >/dev/null 2>&1; then
            delgroup regional-check-agent || true
        fi
        
        # Remove directories
        rm -rf /var/lib/regional-check-agent
        rm -rf /var/log/regional-check-agent
        rm -rf /etc/regional-check-agent
        
        echo "Distributed Regional Check Agent completely removed."
        ;;
    remove)
        echo "Distributed Regional Check Agent removed but configuration preserved."
        ;;
esac

# Reload systemd
systemctl daemon-reload || true